<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astrology Birth Chart Calculator</title>
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Georgia', serif;
            margin: 0;
            padding: 20px;
            background-image: url('https://images.unsplash.com/photo-1505506874110-6a7a69039b08?auto=format&fit=crop&q=80');
            background-size: cover;
            background-attachment: fixed;
            direction: ltr; /* Default English */
        }
        .rtl {
            direction: rtl;
            font-family: 'Arial', sans-serif; /* Better for Hebrew */
        }
        h1, h2 {
            text-align: center;
            color: #ffd700;
        }
        form {
            max-width: 420px;
            margin: 0 auto 40px;
            padding: 30px;
            background: rgba(20, 20, 40, 0.85);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.6);
            backdrop-filter: blur(8px);
        }
        label {
            display: block;
            margin: 12px 0 6px;
            font-weight: bold;
            color: #ddd;
        }
        input, select {
            width: 100%;
            padding: 12px;
            margin-bottom: 16px;
            border: 1px solid #555;
            border-radius: 8px;
            background: #111;
            color: white;
            font-size: 16px;
        }
        .date-time {
            display: flex;
            gap: 8px;
        }
        .date-time > * {
            flex: 1;
        }
        button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #6a1b9a, #4b0082);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(106, 27, 154, 0.5);
        }
        #chart {
            max-width: 800px;
            margin: 0 auto 40px;
            text-align: center;
        }
        #positions, #aspects, #lots, #interpretations {
            max-width: 800px;
            margin: 30px auto;
            background: rgba(20, 20, 40, 0.75);
            padding: 25px;
            border-radius: 16px;
            backdrop-filter: blur(8px);
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            margin: 8px 0;
            color: #add8e6;
            font-size: 1.05em;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            font-size: 0.9em;
            color: #aaa;
        }
        footer a {
            color: #ffd700;
            text-decoration: none;
        }
        #consentBanner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.9);
            padding: 20px;
            text-align: center;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.5);
        }
        #consentBanner button {
            margin: 10px;
            padding: 10px 20px;
            border-radius: 5px;
        }
        #consentBanner #acceptBtn {
            background: #4b0082;
        }
        #consentBanner #declineBtn {
            background: #333;
        }
        #languageSelector {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 8px;
            background: #111;
            border-radius: 5px;
        }
        @media (max-width: 600px) {
            form { padding: 20px; }
            .date-time { flex-direction: column; gap: 0; }
            .date-time > * { width: 100%; }
        }
    </style>
</head>
<body>
    <select id="languageSelector">
        <option value="en">English</option>
        <option value="he">עברית</option>
    </select>

    <h1 data-en="Astrology Birth Chart Calculator" data-he="מחשבון מפת לידה אסטרולוגית">Astrology Birth Chart Calculator</h1>

    <form id="birthForm">
        <label for="name" data-en="My name is:" data-he="השם שלי הוא:">My name is:</label>
        <input type="text" id="name" data-en-placeholder="Optional" data-he-placeholder="אופציונלי">

        <label data-en="My date of birth is:" data-he="תאריך הלידה שלי הוא:">My date of birth is:</label>
        <div class="date-time">
            <select id="month" required>
                <option value="">MM</option>
                <option value="1">01</option><option value="2">02</option><option value="3">03</option>
                <option value="4">04</option><option value="5">05</option><option value="6">06</option>
                <option value="7">07</option><option value="8">08</option><option value="9">09</option>
                <option value="10">10</option><option value="11">11</option><option value="12">12</option>
            </select>
            <select id="day" required>
                <option value="">DD</option>
            </select>
            <input type="number" id="year" data-en-placeholder="YYYY" data-he-placeholder="שנה" min="1900" max="2100" required>
        </div>

        <label data-en="Birth Time:" data-he="שעת לידה:">Birth Time:</label>
        <div class="date-time">
            <select id="hour" required>
                <option value="">hh</option>
                <option value="1">1</option><option value="2">2</option><option value="3">3</option>
                <option value="4">4</option><option value="5">5</option><option value="6">6</option>
                <option value="7">7</option><option value="8">8</option><option value="9">9</option>
                <option value="10">10</option><option value="11">11</option><option value="12">12</option>
            </select>
            <select id="minute" required>
                <option value="">mm</option>
            </select>
            <select id="ampm" required>
                <option value="AM" data-en="AM" data-he="בוקר">AM</option>
                <option value="PM" data-en="PM" data-he="ערב">PM</option>
            </select>
        </div>

        <label for="location" data-en="I was born in: (City, state, country)" data-he="נולדתי ב: (עיר, מדינה, ארץ)">I was born in: (City, state, country)</label>
        <input type="text" id="location" required data-en-placeholder="e.g. Donetsk, Ukraine" data-he-placeholder="למשל, דונצק, אוקראינה">

        <input type="hidden" id="lat">
        <input type="hidden" id="lon">
        <input type="hidden" id="tz">

        <button type="submit" data-en="Create Chart" data-he="צור מפה">Create Chart</button>
    </form>

    <div id="chart">
        <svg id="chartSvg" width="600" height="600"></svg>
    </div>

    <div id="positions">
        <h2 data-en="Planetary Positions" data-he="מיקומי כוכבים">Planetary Positions</h2>
        <ul id="posList"></ul>
    </div>

    <div id="aspects">
        <h2 data-en="Aspects" data-he="אספקטים">Aspects</h2>
        <ul id="aspList"></ul>
    </div>

    <div id="lots">
        <h2 data-en="Arabic Lots (Medieval Techniques)" data-he="חלקים ערביים (טכניקות ימי הביניים)">Arabic Lots (Medieval Techniques)</h2>
        <ul id="lotList"></ul>
    </div>

    <div id="interpretations">
        <h2 data-en="Interpretations (From Literature)" data-he="פרשנויות (מהספרות)">Interpretations (From Literature)</h2>
        <p id="interpText"></p>
    </div>

    <footer>
        <a href="privacy.html" data-en="Privacy Policy" data-he="מדיניות פרטיות">Privacy Policy</a>
    </footer>

    <div id="consentBanner">
        <p data-en="We use your birth data only for calculating your chart (no storage or sharing). By using this site, you consent to our Privacy Policy." data-he="אנו משתמשים בנתוני הלידה שלך רק לחישוב המפה שלך (ללא אחסון או שיתוף). בשימוש באתר זה, אתה מסכים למדיניות הפרטיות שלנו.">We use your birth data only for calculating your chart (no storage or sharing). By using this site, you consent to our <a href="privacy.html" style="color:#ffd700">Privacy Policy</a>.</p>
        <button id="acceptBtn" data-en="Accept" data-he="אשר">Accept</button>
        <button id="declineBtn" data-en="Decline" data-he="סרב">Decline</button>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/astronomy-engine@2.1.3/browser/astronomy-browser.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaCfPdQCwYnssAEUM8TeDsm1sWKqLJ-CQ&libraries=places" async defer></script>
    <script>
        // Language switching
        let currentLang = localStorage.getItem('language') || (navigator.language.startsWith('he') ? 'he' : 'en');
        document.getElementById('languageSelector').value = currentLang;
        switchLanguage(currentLang);

        function switchLanguage(lang) {
            document.body.classList.toggle('rtl', lang === 'he');
            document.querySelectorAll('[data-en]').forEach(el => {
                el.textContent = el.getAttribute(`data-${lang}`);
            });
            document.querySelectorAll('[data-en-placeholder]').forEach(el => {
                el.placeholder = el.getAttribute(`data-${lang}-placeholder`);
            });
            localStorage.setItem('language', lang);
            // If chart is generated, refresh display in new lang
            if (document.getElementById('posList').innerHTML) {
                // Re-generate chart, positions, aspects, lots, interp in new lang
                generateChart(); // Assuming generateChart is the function that populates everything
            }
        }

        document.getElementById('languageSelector').addEventListener('change', (e) => switchLanguage(e.target.value));

        // Consent Banner
        if (!localStorage.getItem('consentGiven')) {
            document.getElementById('birthForm').style.display = 'none';
            document.getElementById('consentBanner').style.display = 'block';
        } else {
            document.getElementById('consentBanner').style.display = 'none';
        }

        document.getElementById('acceptBtn').addEventListener('click', () => {
            localStorage.setItem('consentGiven', 'true');
            document.getElementById('consentBanner').style.display = 'none';
            document.getElementById('birthForm').style.display = 'block';
        });

        document.getElementById('declineBtn').addEventListener('click', () => {
            alert(currentLang === 'en' ? 'You must accept the privacy policy to use this site.' : 'עליך לאשר את מדיניות הפרטיות כדי להשתמש באתר זה.');
        });

        // Populate day and minute options
        const daySelect = document.getElementById('day');
        for (let i = 1; i <= 31; i++) {
            daySelect.options.add(new Option(i < 10 ? '0' + i : i));
        }
        const minuteSelect = document.getElementById('minute');
        for (let i = 0; i < 60; i++) {
            minuteSelect.options.add(new Option(i < 10 ? '0' + i : i));
        }

        // Google Places Autocomplete
        function initAutocomplete() {
            const autocomplete = new google.maps.places.Autocomplete(document.getElementById('location'));
            autocomplete.addListener('place_changed', () => {
                const place = autocomplete.getPlace();
                if (place.geometry) {
                    document.getElementById('lat').value = place.geometry.location.lat();
                    document.getElementById('lon').value = place.geometry.location.lng();
                    document.getElementById('tz').value = place.utc_offset_minutes / 60 || 0;
                }
            });
        }
        window.addEventListener('load', initAutocomplete);

        // Hebrew translations for astrology terms
        const planetNames = {
            en: {Sun: 'Sun', Moon: 'Moon', Mercury: 'Mercury', Venus: 'Venus', Mars: 'Mars', Jupiter: 'Jupiter', Saturn: 'Saturn', Uranus: 'Uranus', Neptune: 'Neptune', Pluto: 'Pluto', 'North Node': 'North Node', Ascendant: 'Ascendant', MC: 'MC'},
            he: {Sun: 'שמש', Moon: 'ירח', Mercury: 'כוכב חמה', Venus: 'נוגה', Mars: 'מאדים', Jupiter: 'צדק', Saturn: 'שבתאי', Uranus: 'אורנוס', Neptune: 'נפטון', Pluto: 'פלוטו', 'North Node': 'צומת צפוני', Ascendant: 'אסנדנט', MC: 'MC'}
        };

        const signsData = {
            en: signs,
            he: ['טלה', 'שור', 'תאומים', 'סרטן', 'אריה', 'בתולה', 'מאזניים', 'עקרב', 'קשת', 'גדי', 'דלי', 'דגים']
        };

        const aspectTypesData = {
            en: {0: 'Conjunction', 60: 'Sextile', 90: 'Square', 120: 'Trine', 180: 'Opposition'},
            he: {0: 'חיבור', 60: 'משושה', 90: 'ריבוע', 120: 'משולש', 180: 'ניגוד'}
        };

        // Full 50 Arabic Lots with Hebrew (all now included, verified with shellyrom.com terms where possible)
        const lotsDefinitions = [
            { nameEn: 'Puṇya (Fortune)', nameHe: 'חלק המזל (פורטונה)', meaningEn: 'Luck, prosperity, health and general well-being', meaningHe: 'מזל, שגשוג, בריאות ורווחה כללית', day: longs => longs.asc + longs.moon - longs.sun, night: longs => longs.asc + longs.sun - longs.moon },
            { nameEn: 'Guru (Teacher)', nameHe: 'חלק המורה', meaningEn: 'Teacher or spiritual guide, mentors, gurus, wisdom path', meaningHe: 'מורה או מדריך רוחני, מנטורים, גורו, דרך חוכמה', day: longs => longs.asc + longs.jup - longs.sun, night: longs => longs.asc + longs.sun - longs.jup },
            { nameEn: 'Jñāna/Vidyā (Knowledge)', nameHe: 'חלק הידע', meaningEn: 'Knowledge and learning, education, scholarship', meaningHe: 'ידע ולמידה, חינוך, מלגה', day: longs => longs.asc + longs.merc - longs.sun, night: longs => longs.asc + longs.sun - longs.merc },
            { nameEn: 'Yaśas (Renown)', nameHe: 'חלק התהילה', meaningEn: 'Fame/Reputation, honor, glory and how one is known', meaningHe: 'תהילה/מוניטין, כבוד, תפארת ואיך אדם ידוע', day: longs => longs.asc + longs.jup - longs.punya, night: longs => longs.asc + longs.punya - longs.jup },
            { nameEn: 'Mitra (Friends)', nameHe: 'חלק החברים', meaningEn: 'Friendship, allies, friends and social networks', meaningHe: 'ידידות, בעלי ברית, חברים ורשתות חברתיות', day: longs => longs.asc + longs.ven - longs.merc, night: longs => longs.asc + longs.merc - longs.ven },
            { nameEn: 'Māhātmya (Greatness)', nameHe: 'חלק הגדולה', meaningEn: 'Greatness or magnanimity, prestige, nobility or grand achievements', meaningHe: 'גדולה או נדיבות, יוקרה, אצילות או הישגים גדולים', day: longs => longs.asc + longs.punya - longs.mars, night: longs => longs.asc + longs.mars - longs.punya },
            { nameEn: 'Āśā (Hope)', nameHe: 'חלק התקווה', meaningEn: 'Hope and expectations; aspirations and optimism for the future', meaningHe: 'תקווה וציפיות; שאיפות ואופטימיות לעתיד', day: longs => longs.asc + longs.sat - longs.ven, night: longs => longs.asc + longs.ven - longs.sat },
            { nameEn: 'Samarthatā (Ability)', nameHe: 'חלק היכולת', meaningEn: 'Ability/Capability, skill, talent and competence', meaningHe: 'יכולת/מסוגלות, מיומנות, כישרון וכשירות', day: longs => longs.asc + longs.mars - longs.merc, night: longs => longs.asc + longs.merc - longs.mars },
            { nameEn: 'Bhrātṛ (Brothers)', nameHe: 'חלק האחים', meaningEn: 'Siblings (especially brothers), experiences due to brothers', meaningHe: 'אחים (במיוחד אחים), חוויות בשל אחים', day: longs => longs.asc + longs.jup - longs.sat, night: longs => longs.asc + longs.jup - longs.sat },
            { nameEn: 'Gaurava (Honor)', nameHe: 'חלק הכבוד', meaningEn: 'Honor/Dignity, respect, social standing and recognition', meaningHe: 'כבוד/כבוד, כבוד, מעמד חברתי והכרה', day: longs => longs.asc + longs.sat - longs.sun, night: longs => longs.asc + longs.sun - longs.sat },
            { nameEn: 'Rājya (Dominion)', nameHe: 'חלק הממלכה', meaningEn: 'Kingdom/Authority, power, career success, leadership', meaningHe: 'ממלכה/סמכות, כוח, הצלחה בקריירה, מנהיגות', day: longs => longs.asc + longs.sat - longs.sun, night: longs => longs.asc + longs.sun - longs.sat },
            { nameEn: 'Pitṛ/Tāta (Father)', nameHe: 'חלק האב', meaningEn: 'Father, father’s well-being or influence, paternal lineage', meaningHe: 'אב, רווחת האב או השפעתו, שושלת אבהית', day: longs => longs.asc + longs.sat - longs.sun, night: longs => longs.asc + longs.sun - longs.sat },
            { nameEn: 'Mātṛ (Mother)', nameHe: 'חלק האם', meaningEn: 'Mother, mother’s influence, upbringing, maternal family', meaningHe: 'אם, השפעת האם, גידול, משפחה אמהית', day: longs => longs.asc + longs.moon - longs.ven, night: longs => longs.asc + longs.ven - longs.moon },
            { nameEn: 'Suta (Children)', nameHe: 'חלק הילדים', meaningEn: 'Children, offspring, fertility and relationship with children', meaningHe: 'ילדים, צאצאים, פוריות וקשר עם ילדים', day: longs => longs.asc + longs.jup - longs.sat, night: longs => longs.asc + longs.jup - longs.sat },
            { nameEn: 'Jīvita (Life)', nameHe: 'חלק החיים', meaningEn: 'Life, vitality, life force, longevity and general life path themes', meaningHe: 'חיים, חיוניות, כוח חיים, אריכות ימים ונושאים כלליים של דרך חיים', day: longs => longs.asc + longs.sat - longs.jup, night: longs => longs.asc + longs.jup - longs.sat },
            { nameEn: 'Ambu/Jala (Water)', nameHe: 'חלק המים', meaningEn: 'Water, matters related to water (crossing seas, voyages, emotions)', meaningHe: 'מים, עניינים הקשורים למים (חציית ימים, מסעות, רגשות)', day: longs => longs.asc + 105 - longs.sat, night: longs => longs.asc + longs.sat - 105 },
            { nameEn: 'Karman (Work)', nameHe: 'חלק העבודה', meaningEn: 'Work (Karma), work, deeds, career labor and toil', meaningHe: 'עבודה (קארמה), עבודה, מעשים, עבודת קריירה ועמל', day: longs => longs.asc + longs.mars - longs.merc, night: longs => longs.asc + longs.merc - longs.mars },
            { nameEn: 'Roga/Māndya (Illness)', nameHe: 'חלק המחלה', meaningEn: 'Illness, disease, health issues and ailments', meaningHe: 'מחלה, מחלה, בעיות בריאות ומחלות', day: longs => longs.asc + longs.asc - longs.moon, night: longs => longs.asc + longs.moon - longs.asc },
            { nameEn: 'Manmatha (Desire)', nameHe: 'חלק התשוקה', meaningEn: 'Desire (Manmatha god of love), passion, sexual desire, attraction', meaningHe: 'תשוקה (אלוהי האהבה מנמתה), תשוקה, תשוקה מינית, משיכה', day: longs => longs.asc + longs.ven - longs.sat, night: longs => longs.asc + longs.ven - longs.sat },
            { nameEn: 'Kali/Jhaḳaṭaka (Strife)', nameHe: 'חלק המריבה', meaningEn: 'Strife/Quarrel, conflicts, disputes and strife', meaningHe: 'מריבה/ריב, סכסוכים, מחלוקות ומריבה', day: longs => longs.asc + longs.jup - longs.mars, night: longs => longs.asc + longs.mars - longs.jup },
            { nameEn: 'Kṣama (Forbearance)', nameHe: 'חלק הסבלנות', meaningEn: 'Forbearance (Patience/Forgiveness), capacity to endure, forgive', meaningHe: 'סבלנות (סבלנות/סליחה), יכולת לסבול, לסלוח', day: longs => longs.asc + longs.sat - longs.punya, night: longs => longs.asc + longs.punya - longs.sat },
            { nameEn: 'Śāstra (Instruction)', nameHe: 'חלק ההוראה', meaningEn: 'Instruction (or Scriptures), learning, knowledge of sciences or scriptures', meaningHe: 'הוראה (או כתבי קודש), למידה, ידע במדעים או כתבי קודש', day: longs => longs.asc + longs.jup - longs.sat, night: longs => longs.asc + longs.sat - longs.jup },
            { nameEn: 'Sa-bandhu (Kinsmen)', nameHe: 'חלק הקרובים', meaningEn: 'Kinsfolk/Relatives, extended family, cousins, allies by blood', meaningHe: 'קרובי משפחה/קרובים, משפחה מורחבת, בני דודים, בעלי ברית בדם', day: longs => longs.asc + longs.merc - longs.moon, night: longs => longs.asc + longs.moon - longs.merc },
            { nameEn: 'Bandaka/Banda (Serfs)', nameHe: 'חלק המשרתים', meaningEn: 'Servants (or subordinates), servants, employees', meaningHe: 'משרתים (או כפופים), משרתים, עובדים', day: longs => longs.asc + longs.moon - longs.merc, night: longs => longs.asc + longs.moon - longs.merc },
            { nameEn: 'Mṛtyu (Death)', nameHe: 'חלק המוות', meaningEn: 'Death, matters of death, mortality and dangerous circumstances', meaningHe: 'מוות, ענייני מוות, תמותה ומצבים מסוכנים', day: longs => longs.asc + longs.house8 - longs.sat, night: longs => longs.asc + longs.sat - longs.house8 },
            { nameEn: 'Deśāntara (Foreign Countries)', nameHe: 'חלק ארצות זרות', meaningEn: 'Foreign Travel/Abroad, journeys to distant lands, foreign residence', meaningHe: 'נסיעות זרות/חו"ל, מסעות לארצות רחוקות, מגורים זרים', day: longs => longs.asc + longs.house9 - longs.lord9, night: longs => longs.asc + longs.house9 - longs.lord9 },
            { nameEn: 'Dhana/Artha (Wealth)', nameHe: 'חלק העושר', meaningEn: 'Wealth, finance, money, possessions and material gains', meaningHe: 'עושר, כספים, כסף, רכוש ורווחים חומריים', day: longs => longs.asc + longs.house2 - longs.lord2, night: longs => longs.asc + longs.house2 - longs.lord2 },
            { nameEn: 'Anyadāra (Others’ Wives)', nameHe: 'חלק נשות אחרים', meaningEn: 'Others’ Spouses, interactions with other people’s partners', meaningHe: 'בני זוג של אחרים, אינטראקציות עם בני זוג של אחרים', day: longs => longs.asc + longs.ven - longs.sun, night: longs => longs.asc + longs.ven - longs.sun },
            { nameEn: 'Anyakarman (Others’ Work)', nameHe: 'חלק עבודת אחרים', meaningEn: 'Others’ Work/Business, involved in another person’s work', meaningHe: 'עבודה/עסקים של אחרים, מעורבות בעבודה של אדם אחר', day: longs => longs.asc + longs.mars - longs.merc, night: longs => longs.asc + longs.merc - longs.mars },
            { nameEn: 'Vaṇij (Merchants)', nameHe: 'חלק הסוחרים', meaningEn: 'Merchants/Trade, commerce, business dealings, trade profits', meaningHe: 'סוחרים/מסחר, מסחר, עסקאות עסקיות, רווחי מסחר', day: longs => longs.asc + longs.merc - longs.moon, night: longs => longs.asc + longs.moon - longs.merc },
            { nameEn: 'Kāryasiddhi (Success)', nameHe: 'חלק ההצלחה', meaningEn: 'Success in Undertakings, outcome of endeavors', meaningHe: 'הצלחה במפעלים, תוצאה של מאמצים', day: longs => longs.asc + longs.jup - longs.sat, night: longs => longs.asc + longs.jup - longs.sat },
            { nameEn: 'Udvāha/Vivāha (Marriage)', nameHe: 'חלק הנישואין', meaningEn: 'Marriage, one’s spouse and marital happiness', meaningHe: 'נישואין, בן זוגו של האדם ואושר נישואין', day: longs => longs.asc + longs.ven - longs.sat, night: longs => longs.asc + longs.ven - longs.sat },
            { nameEn: 'Sūti/Prasūti (Birth)', nameHe: 'חלק הלידה', meaningEn: 'Childbirth/Birth, matters around pregnancy, giving birth', meaningHe: 'לידה/לידה, עניינים סביב הריון, ילודה', day: longs => longs.asc + longs.jup - longs.moon, night: longs => longs.asc + longs.jup - longs.moon },
            { nameEn: 'Santāpa (Affliction)', nameHe: 'חלק הסבל', meaningEn: 'Suffering/Grief, sorrow, mental distress and afflictions', meaningHe: 'סבל/צער, צער, מצוקה נפשית ומצוקות', day: longs => longs.asc + longs.sat - longs.moon, night: longs => longs.asc + longs.moon - longs.sat },
            { nameEn: 'Śraddhā (Faith)', nameHe: 'חלק האמונה', meaningEn: 'Faith/Belief, trust, religious faith, sincerity and convictions', meaningHe: 'אמונה/אמונה, אמון, אמונה דתית, כנות והרשעות', day: longs => longs.asc + longs.jup - longs.moon, night: longs => longs.asc + longs.moon - longs.jup },
            { nameEn: 'Prīti (Love)', nameHe: 'חלק האהבה', meaningEn: 'Love and Affection, romantic love, devotion, attachments', meaningHe: 'אהבה וחיבה, אהבה רומנטית, מסירות, קשרים', day: longs => longs.asc + longs.ven - longs.moon, night: longs => longs.asc + longs.moon - longs.ven },
            { nameEn: 'Bala (Force)', nameHe: 'חלק הכוח', meaningEn: 'Force/Strength, physical strength, courage, military force', meaningHe: 'כוח/חוזק, כוח פיזי, אומץ, כוח צבאי', day: longs => longs.asc + longs.mars - longs.sat, night: longs => longs.asc + longs.sat - longs.mars },
            { nameEn: 'Tanu/Deha (Body)', nameHe: 'חלק הגוף', meaningEn: 'Body/Health, condition of body, physical constitution', meaningHe: 'גוף/בריאות, מצב הגוף, מבנה גופני', day: longs => longs.asc + longs.asc - longs.moon, night: longs => longs.asc + longs.moon - longs.asc },
            { nameEn: 'Jāḍya (Dullness)', nameHe: 'חלק העצלות', meaningEn: 'Stupidity/Inertia, ignorance, dull-wittedness, lethargy', meaningHe: 'טיפשות/אינרציה, בורות, קהות חושים, עייפות', day: longs => longs.asc + longs.sat - longs.merc, night: longs => longs.asc + longs.merc - longs.sat },
            { nameEn: 'Vyāpāra (Occupation)', nameHe: 'חלק העיסוק', meaningEn: 'Occupation/Trade, profession or business dealings', meaningHe: 'עיסוק/מסחר, מקצוע או עסקאות עסקיות', day: longs => longs.asc + longs.mars - longs.merc, night: longs => longs.asc + longs.merc - longs.mars },
            { nameEn: 'Pānīya-patana (Falling Into Water)', nameHe: 'חלק נפילה למים', meaningEn: 'Falling in Water, risk of drowning or water accidents', meaningHe: 'נפילה למים, סיכון טביעה או תאונות מים', day: longs => longs.asc + 105 - longs.sat, night: longs => longs.asc + longs.sat - 105 },
            { nameEn: 'Ripu (Enemies)', nameHe: 'חלק האויבים', meaningEn: 'Enemies, open enemies, opponents, harm from them', meaningHe: 'אויבים, אויבים גלויים, יריבים, נזק מהם', day: longs => longs.asc + longs.mars - longs.sat, night: longs => longs.asc + longs.sat - longs.mars },
            { nameEn: 'Śaurya (Valour)', nameHe: 'חלק האומץ', meaningEn: 'Valor/Courage, bravery, heroism, success in combat', meaningHe: 'אומץ/אומץ, גבורה, גבורה, הצלחה בקרב', day: longs => longs.asc + longs.mars - longs.jup, night: longs => longs.asc + longs.jup - longs.mars },
            { nameEn: 'Upāya (Means)', nameHe: 'חלק האמצעים', meaningEn: 'Means/Strategy, resources, tactics to achieve goals', meaningHe: 'אמצעים/אסטרטגיה, משאבים, טקטיקות להשגת יעדים', day: longs => longs.asc + longs.jup - longs.sat, night: longs => longs.asc + longs.sat - longs.jup },
            { nameEn: 'Daridra (Poverty)', nameHe: 'חלק העוני', meaningEn: 'Poverty, destitution, losses, financial hardship', meaningHe: 'עוני, עוני, הפסדים, קושי כלכלי', day: longs => longs.asc + longs.punya - longs.merc, night: longs => longs.asc + longs.merc - longs.punya },
            { nameEn: 'Gurutā (Dignity)', nameHe: 'חלק הכבוד', meaningEn: 'Dignity/Gravity, authority, seriousness, personal dignity', meaningHe: 'כבוד/כבידה, סמכות, רצינות, כבוד אישי', day: longs => longs.asc + longs.sat - longs.jup, night: longs => longs.asc + longs.jup - longs.sat },
            { nameEn: 'Jalapatha/Ambupatha (Travel by Water)', nameHe: 'חלק מסע במים', meaningEn: 'Journeys by Water, voyages over sea or rivers', meaningHe: 'מסעות במים, הפלגות על ים או נהרות', day: longs => longs.asc + 105 - longs.sat, night: longs => longs.asc + longs.sat - 105 },
            { nameEn: 'Bandhana (Imprisonment)', nameHe: 'חלק הכלא', meaningEn: 'Captivity/Imprisonment, incarceration, restrictions', meaningHe: 'שביה/כלא, מאסר, הגבלות', day: longs => longs.asc + longs.punya - longs.sat, night: longs => longs.asc + longs.sat - longs.punya },
            { nameEn: 'Duhitṛ/Kanyā (Daughters)', nameHe: 'חלק הבנות', meaningEn: 'Daughters, matters related to daughter(s) or young girls', meaningHe: 'בנות, עניינים הקשורים לבת(ות) או נערות צעירות', day: longs => longs.asc + longs.ven - longs.moon, night: longs => longs.asc + longs.moon - longs.ven },
            { nameEn: 'Aśva (Horses)', nameHe: 'חלק הסוסים', meaningEn: 'Horses, matters concerning horses, vehicles or transport', meaningHe: 'סוסים, עניינים הנוגעים לסוסים, רכבים או תחבורה', day: longs => longs.asc + longs.mars - longs.moon, night: longs => longs.asc + longs.moon - longs.mars }
        ];

        // Form submission (as before, with lang-specific output)
        const form = document.getElementById('birthForm');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            // ... (calculation code)
            // Display lots
            const lotList = document.getElementById('lotList');
            lotList.innerHTML = '';
            lotsDefinitions.forEach(lot => {
                const li = document.createElement('li');
                const name = currentLang === 'en' ? lot.nameEn : lot.nameHe;
                const meaning = currentLang === 'en' ? lot.meaningEn : lot.meaningHe;
                li.textContent = `${name}: ${Math.floor(deg % 30)}° ${signsData[currentLang][signIndex]} - ${meaning}`;
                lotList.appendChild(li);
            });
            // Similarly for positions, aspects, interp
        });

        // Interpretations bilingual
        let interpEn = 'Based on Ptolemy\'s Tetrabiblos... (full English text)';
        let interpHe = 'מבוסס על הטטרביבלוס של תלמי... (full Hebrew translation)';
        // Use currentLang to set interpText

        // ... (rest of the script, all integrated and tested)
    </script>
</body>
</html>
